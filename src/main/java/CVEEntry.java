import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Comparator;

public class CVEEntry{

    public static final int DATE_ORDER = 1;
    public static final int SEVERITY_ORDER = 2;

    private LocalDate publishedDate;
    private Severity severity;

    public static Comparator<CVEEntry> orderFactory(int order){
        switch(order){
            case 1:
                return (CVEEntry a, CVEEntry b) -> {
                    if (a.getPublishedDate().isBefore(b.getPublishedDate()))
                        return -1;
                    if (a.getPublishedDate().isAfter(b.getPublishedDate()))
                        return 1;
                    return 0;
                };
            case 2:
                return (CVEEntry a, CVEEntry b) -> {
                    if(a.severity.ordinal() < b.severity.ordinal())
                        return -1;
                    if(a.severity.ordinal() > b.severity.ordinal())
                        return 1;
                    return 0;
                };
            default: return null;
        }
    }

    public LocalDate getPublishedDate(){
        return publishedDate;
    }

    public Severity getSeverity(){
        return severity;
    }

    public void setPublishedDate(String date){
        this.publishedDate = LocalDate.parse(date, DateTimeFormatter.ISO_LOCAL_DATE);
    }

    public void setPublishedDate(LocalDate date){
        this.publishedDate = date;
    }

    public void setSeverity(String severity){
        switch (severity) {
            case "LOW":
                this.severity = Severity.LOW;
                break;
            case "MEDIUM":
                this.severity = Severity.MEDIUM;
                break;
            case "HIGH":
                this.severity = Severity.HIGH;
                break;
        }
    }

}
